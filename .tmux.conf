# Invisible tmux - sessions only, everything else passes through to Ghostty

# === Terminal & Color Support ===
set -g default-terminal "tmux-256color"
set -as terminal-features ',xterm-ghostty:RGB:hyperlinks:strikethrough:overline:usstyle:osc7:clipboard:focus:extkeys:sync:title:rectfill:ccolour:cstyle:margins'

# === Full Passthrough ===
set -g allow-passthrough on          # let escape sequences reach Ghostty
set -s set-clipboard on              # let apps set system clipboard via OSC 52
set -g focus-events on               # pass focus in/out to apps
set -s extended-keys on              # pass modifier keys properly
set -s extended-keys-format csi-u    # modern key encoding

# === Mouse: ON so Ghostty sends mouse events instead of converting scroll to arrows ===
set -g mouse on

# === Keyboard: minimal latency ===
set -s escape-time 10

# === Completely invisible ===
set -g status off
set -g display-time 0
set -g window-style default
set -g window-active-style default
set -g pane-border-style 'fg=default'
set -g pane-active-border-style 'fg=default'

# === Silence all notifications ===
set -g visual-activity off
set -g visual-bell off
set -g visual-silence off
set -g bell-action none
set -g activity-action none
set -g silence-action none
setw -g monitor-activity off
setw -g monitor-bell off

# === Title passthrough ===
set -g set-titles on
set -g set-titles-string '#{pane_title}'

# === Session management ===
setw -g aggressive-resize on
setw -g automatic-rename on
set -g renumber-windows on
set -g history-limit 50000
set -g detach-on-destroy on

# === Unbind all defaults, keep only essentials ===
unbind -a -T root
unbind -a -T prefix
unbind -a -T copy-mode

set -g prefix C-b
bind C-b send-prefix
bind d detach-client
bind c new-window
bind : command-prompt

# Scroll always enters copy-mode (even when app uses alternate screen)
bind -T root WheelUpPane copy-mode -e \; send-keys -M
bind -T root WheelDownPane send-keys -M

# Copy-mode: scroll and exit
bind -T copy-mode WheelUpPane send-keys -X scroll-up
bind -T copy-mode WheelDownPane send-keys -X scroll-down
bind -T copy-mode q send-keys -X cancel
bind -T copy-mode Escape send-keys -X cancel
